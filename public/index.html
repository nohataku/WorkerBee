<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkerBee - Ë§áÊï∞‰∫∫ÂØæÂøú„Çø„Çπ„ÇØÁÆ°ÁêÜ</title>
    <meta name="description" content="Ë§áÊï∞‰∫∫„Åß„É™„Ç¢„É´„Çø„Ç§„É†„Å´ÂçîÂäõ„Åó„Å¶„Çø„Çπ„ÇØÁÆ°ÁêÜ„Åå„Åß„Åç„ÇãWeb„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥">
    <meta name="keywords" content="„Çø„Çπ„ÇØÁÆ°ÁêÜ,„ÉØ„Éº„Ç´„Éº„Éì„Éº,GitHub Pages,Google Apps Script">
    <meta name="author" content="zequt">
    <link rel="icon" href="photo/WorkerBee_logo.jpeg" type="image/x-icon">

    <!-- Áí∞Â¢ÉÂà•„ÅÆ„Éô„Éº„ÇπURLË®≠ÂÆö -->
    <script>
        // „É≠„Éº„Ç´„É´ÈñãÁô∫Áí∞Â¢É„ÅÆÂ†¥Âêà„ÅØ„Éô„Éº„ÇπURL„ÇíË®≠ÂÆö„Åó„Å™„ÅÑ
        if (window.location.hostname !== 'localhost' && 
            window.location.hostname !== '127.0.0.1' &&
            window.location.hostname.includes('github.io')) {
            // GitHub Pages „ÅÆÂ†¥Âêà„ÅÆ„Åø„Éô„Éº„ÇπURL„ÇíË®≠ÂÆö
            document.write('<base href="/WorkerBee/">');
        }
        // Netlify „Å™„Å©„Åù„ÅÆ‰ªñ„ÅÆÁí∞Â¢É„Åß„ÅØ‰Ωï„ÇÇ„Åó„Å™„ÅÑÔºà„É´„Éº„Éà„Éë„Çπ„Çí‰ΩøÁî®Ôºâ
    </script>
    
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- „Ç´„É¨„É≥„ÉÄ„Éº„Éª„Ç¨„É≥„Éà„ÉÅ„É£„Éº„ÉàÁî®„É©„Ç§„Éñ„É©„É™ -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
    <link href="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css" rel="stylesheet">
    
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>
<body>
    <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢ -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner">
            <img src="photo/WorkerBee_logo.jpeg" alt="WorkerBee Logo" class="loading-logo">
            <h2>WorkerBee üêù</h2>
            <div class="spinner"></div>
        </div>
    </div>

    <!-- „É≠„Ç∞„Ç§„É≥„ÉªÁôªÈå≤ÁîªÈù¢ -->
    <div id="authContainer" class="auth-container" style="display: none;">
        <div class="auth-card">
            <div class="auth-header">
                <h1><img src="photo/WorkerBee_logo.jpeg" alt="WorkerBee Logo" class="auth-logo"> WorkerBee üêù</h1>
                <p>Ë§áÊï∞‰∫∫„ÅßÂäπÁéáÁöÑ„Å´„Çø„Çπ„ÇØÁÆ°ÁêÜ üçØ</p>
            </div>

            <!-- „É≠„Ç∞„Ç§„É≥„Éï„Ç©„Éº„É† -->
            <div id="loginForm" class="auth-form active">
                <h2>„É≠„Ç∞„Ç§„É≥</h2>
                <form id="loginFormElement">
                    <div class="form-group">
                        <label for="loginEmail">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i> „É≠„Ç∞„Ç§„É≥
                    </button>
                </form>
                <p class="auth-switch">
                    „Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Å™„ÅÑÊñπ„ÅØ
                    <a href="#" id="showRegister">„Åì„Å°„Çâ„Åã„ÇâÁôªÈå≤</a>
                </p>
            </div>

            <!-- ÁôªÈå≤„Éï„Ç©„Éº„É† -->
            <div id="registerForm" class="auth-form">
                <h2>Êñ∞Ë¶èÁôªÈå≤</h2>
                <form id="registerFormElement">
                    <div class="form-group">
                        <label for="registerUsername">„É¶„Éº„Ç∂„ÉºÂêç</label>
                        <input type="text" id="registerUsername" required minlength="3" maxlength="30">
                        <small>3-30ÊñáÂ≠ó„ÅÆËã±Êï∞Â≠ó„ÄÅ„Ç¢„É≥„ÉÄ„Éº„Çπ„Ç≥„Ç¢„ÄÅ„Éè„Ç§„Éï„É≥</small>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerDisplayName">Ë°®Á§∫Âêç</label>
                        <input type="text" id="registerDisplayName" required maxlength="50">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                        <input type="password" id="registerPassword" required minlength="6">
                        <small>6ÊñáÂ≠ó‰ª•‰∏ä</small>
                    </div>
                    <div class="form-group">
                        <label for="registerConfirmPassword">„Éë„Çπ„ÉØ„Éº„ÉâÁ¢∫Ë™ç</label>
                        <input type="password" id="registerConfirmPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i> ÁôªÈå≤
                    </button>
                </form>
                <p class="auth-switch">
                    Êó¢„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„ÅÆÊñπ„ÅØ
                    <a href="#" id="showLogin">„Åì„Å°„Çâ„Åã„Çâ„É≠„Ç∞„Ç§„É≥</a>
                </p>
            </div>
        </div>
    </div>

    <!-- „É°„Ç§„É≥„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ -->
    <div id="appContainer" class="app-container" style="display: none;">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="app-header">
            <div class="header-left">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <h1><img src="photo/WorkerBee_logo.jpeg" alt="WorkerBee Logo" class="header-logo"> WorkerBee üêù</h1>
            </div>
            <div class="header-center">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="„Çø„Çπ„ÇØ„ÇíÊ§úÁ¥¢...">
                </div>
            </div>
            <div class="header-right">
                <div class="notification-bell">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="notificationBadge" style="display: none;"></span>
                </div>
                <div class="user-menu">
                    <div class="user-avatar" id="userAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="dropdown-menu" id="userDropdown">
                        <div class="user-info">
                            <div class="user-name" id="userName"></div>
                            <div class="user-email" id="userEmail"></div>
                        </div>
                        <hr>
                        <a href="#" id="profileBtn"><i class="fas fa-user-cog"></i> „Éó„É≠„Éï„Ç£„Éº„É´</a>
                        <a href="#" id="settingsBtn"><i class="fas fa-cog"></i> Ë®≠ÂÆö</a>
                        <hr>
                        <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> „É≠„Ç∞„Ç¢„Ç¶„Éà</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- „É¢„Éê„Ç§„É´Áî®„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
        <div class="mobile-overlay" id="mobileOverlay"></div>

        <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>„É°„Éã„É•„Éº</h2>
                <button class="close-sidebar-btn" id="closeSidebarBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-view="dashboard">
                    <i class="fas fa-home"></i> „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
                </a>
                <a href="#" class="nav-item" data-view="tasks">
                    <i class="fas fa-tasks"></i> „Çø„Çπ„ÇØ
                </a>
                <a href="#" class="nav-item" data-view="calendar">
                    <i class="fas fa-calendar"></i> „Ç´„É¨„É≥„ÉÄ„Éº
                </a>
                <a href="#" class="nav-item" data-view="gantt">
                    <i class="fas fa-chart-gantt"></i> „Ç¨„É≥„Éà„ÉÅ„É£„Éº„Éà
                </a>
                <a href="#" class="nav-item" data-view="projects">
                    <i class="fas fa-folder"></i> „Éó„É≠„Ç∏„Çß„ÇØ„Éà
                </a>
                <a href="#" class="nav-item" data-view="team">
                    <i class="fas fa-users"></i> „ÉÅ„Éº„É†
                </a>
            </nav>
        </aside>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <!-- „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ -->
            <div id="dashboardView" class="view active">
                <div class="view-header">
                    <h2>„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</h2>
                    <div class="view-actions">
                        <button class="btn btn-primary" id="addTaskBtn">
                            <i class="fas fa-plus"></i> Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ
                        </button>
                    </div>
                </div>

                <!-- Áµ±Ë®à„Ç´„Éº„Éâ -->
                <div class="stats-grid">
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-list-ul"></i>
                        </div>
                        <div class="stats-info">
                            <div class="stats-number" id="totalTasks">0</div>
                            <div class="stats-label">Á∑è„Çø„Çπ„ÇØÊï∞</div>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stats-info">
                            <div class="stats-number" id="completedTasks">0</div>
                            <div class="stats-label">ÂÆå‰∫ÜÊ∏à„Åø</div>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stats-info">
                            <div class="stats-number" id="pendingTasks">0</div>
                            <div class="stats-label">Êú™ÂÆå‰∫Ü</div>
                        </div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stats-info">
                            <div class="stats-number" id="overdueTasks">0</div>
                            <div class="stats-label">ÊúüÈôêÂàá„Çå</div>
                        </div>
                    </div>
                </div>

                <!-- ÊúÄËøë„ÅÆ„Çø„Çπ„ÇØ -->
                <div class="dashboard-section">
                    <h3>ÊúÄËøë„ÅÆ„Çø„Çπ„ÇØ</h3>
                    <div id="recentTasks" class="task-list">
                        <!-- ÂãïÁöÑ„Å´ËøΩÂä† -->
                    </div>
                </div>
            </div>

            <!-- „Çø„Çπ„ÇØ‰∏ÄË¶ß -->
            <div id="tasksView" class="view">
                <div class="view-header">
                    <h2>„Çø„Çπ„ÇØ</h2>
                    <div class="view-actions">
                        <div class="filter-group">
                            <select id="statusFilter">
                                <option value="all">„Åô„Åπ„Å¶</option>
                                <option value="pending">Êú™ÂÆå‰∫Ü</option>
                                <option value="completed">ÂÆå‰∫ÜÊ∏à„Åø</option>
                            </select>
                            <select id="priorityFilter">
                                <option value="">ÂÑ™ÂÖàÂ∫¶</option>
                                <option value="low">‰Ωé</option>
                                <option value="medium">‰∏≠</option>
                                <option value="high">È´ò</option>
                                <option value="urgent">Á∑äÊÄ•</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" id="addTaskBtn2">
                            <i class="fas fa-plus"></i> Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ
                        </button>
                    </div>
                </div>

                <div id="tasksList" class="task-list">
                    <!-- ÂãïÁöÑ„Å´ËøΩÂä† -->
                </div>

                <div id="tasksEmpty" class="empty-state" style="display: none;">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>„Çø„Çπ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</h3>
                    <p>Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„Çí‰ΩúÊàê„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜ</p>
                </div>
            </div>

            <!-- „Ç´„É¨„É≥„ÉÄ„Éº„Éì„É•„Éº -->
            <div id="calendarView" class="view">
                <div class="view-header">
                    <h2>„Ç´„É¨„É≥„ÉÄ„Éº</h2>
                    <div class="view-actions">
                        <div class="calendar-controls">
                            <button class="btn btn-secondary" id="calendarToday">‰ªäÊó•</button>
                            <button class="btn btn-secondary" id="calendarPrev">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="btn btn-secondary" id="calendarNext">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="calendar-view-buttons">
                            <button class="btn btn-outline" id="calendarMonth">Êúà</button>
                            <button class="btn btn-outline" id="calendarWeek">ÈÄ±</button>
                            <button class="btn btn-outline" id="calendarDay">Êó•</button>
                        </div>
                        <button class="btn btn-primary" id="addTaskFromCalendar">
                            <i class="fas fa-plus"></i> Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ
                        </button>
                    </div>
                </div>
                <div class="calendar-container">
                    <div id="calendar"></div>
                </div>
            </div>

            <!-- „Ç¨„É≥„Éà„ÉÅ„É£„Éº„Éà„Éì„É•„Éº -->
            <div id="ganttView" class="view">
                <div class="view-header">
                    <h2>„Ç¨„É≥„Éà„ÉÅ„É£„Éº„Éà</h2>
                    <div class="view-actions">
                        <div class="gantt-controls">
                            <button class="btn btn-secondary" id="ganttZoomIn">
                                <i class="fas fa-search-plus"></i> „Ç∫„Éº„É†„Ç§„É≥
                            </button>
                            <button class="btn btn-secondary" id="ganttZoomOut">
                                <i class="fas fa-search-minus"></i> „Ç∫„Éº„É†„Ç¢„Ç¶„Éà
                            </button>
                            <select id="ganttScale" class="btn btn-secondary">
                                <option value="day">Êó•</option>
                                <option value="week" selected>ÈÄ±</option>
                                <option value="month">Êúà</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" id="addTaskFromGantt">
                            <i class="fas fa-plus"></i> Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ
                        </button>
                    </div>
                </div>
                <div class="gantt-container">
                    <div id="gantt_here"></div>
                </div>
            </div>

            <!-- „Åù„ÅÆ‰ªñ„ÅÆ„Éì„É•„ÉºÔºà„Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÔºâ -->

            <div id="projectsView" class="view">
                <div class="view-header">
                    <h2>„Éó„É≠„Ç∏„Çß„ÇØ„Éà</h2>
                </div>
                <p>„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÁÆ°ÁêÜÊ©üËÉΩ„ÅØ‰ªäÂæåÂÆüË£Ö‰∫àÂÆö„Åß„Åô„ÄÇ</p>
            </div>

            <div id="teamView" class="view">
                <div class="view-header">
                    <h2>„ÉÅ„Éº„É†</h2>
                </div>
                <p>„ÉÅ„Éº„É†ÁÆ°ÁêÜÊ©üËÉΩ„ÅØ‰ªäÂæåÂÆüË£Ö‰∫àÂÆö„Åß„Åô„ÄÇ</p>
            </div>
        </main>
    </div>

    <!-- „Çø„Çπ„ÇØ‰ΩúÊàê/Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´ -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="taskModalTitle">Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ</h3>
                <button class="modal-close" id="taskModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">„Çø„Ç§„Éà„É´ *</label>
                    <input type="text" id="taskTitle" required maxlength="200">
                </div>
                <div class="form-group">
                    <label for="taskDescription">Ë™¨Êòé</label>
                    <textarea id="taskDescription" maxlength="1000"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskPriority">ÂÑ™ÂÖàÂ∫¶</label>
                        <select id="taskPriority">
                            <option value="low">‰Ωé</option>
                            <option value="medium" selected>‰∏≠</option>
                            <option value="high">È´ò</option>
                            <option value="urgent">Á∑äÊÄ•</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskDueDate">ÊúüÈôê</label>
                        <input type="datetime-local" id="taskDueDate">
                    </div>
                </div>
                <div class="form-group">
                    <label for="taskAssignedTo">ÊãÖÂΩìËÄÖ</label>
                    <div class="user-select">
                        <select id="taskAssignedTo">
                            <option value="">ÊãÖÂΩìËÄÖ„ÇíÈÅ∏Êäû...</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="taskModalCancel">„Ç≠„É£„É≥„Çª„É´</button>
                    <button type="submit" class="btn btn-primary" id="taskModalSave">‰øùÂ≠ò</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÈÄöÁü•„Ç®„É™„Ç¢ -->
    <div id="notifications" class="notifications"></div>

    <!-- Â§ñÈÉ®„É©„Ç§„Éñ„É©„É™ -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <script src="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js"></script>
    
    <!-- „É©„Ç§„Éñ„É©„É™Ë™≠„ÅøËæº„ÅøÁ¢∫Ë™ç -->
    <script>
        window.addEventListener('load', function() {
            console.log('Window loaded. Checking libraries...');
            console.log('FullCalendar available:', typeof FullCalendar !== 'undefined');
            console.log('DHTMLX Gantt available:', typeof gantt !== 'undefined');
        });
    </script>

    <!-- Ë®≠ÂÆö„Éï„Ç°„Ç§„É´ÔºàÊúÄÂàù„Å´Ë™≠„ÅøËæº„ÅøÔºâ -->
    <script src="js/config.js"></script>
    
    <!-- „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£„ÇØ„É©„Çπ -->
    <script src="js/utils/LibraryLoader.js"></script>
    <script src="js/utils/PasswordUtils.js"></script>
    <script src="js/utils/TaskUtils.js"></script>
    
    <!-- API„ÇØ„É©„Ç§„Ç¢„É≥„Éà -->
    <script src="js/api/ApiClient.js"></script>
    
    <!-- „Éû„Éç„Éº„Ç∏„É£„Éº„ÇØ„É©„Çπ -->
    <script src="js/managers/NotificationManager.js"></script>
    <script src="js/managers/SocketManager.js"></script>
    <script src="js/managers/AuthManager.js"></script>
    <script src="js/managers/TaskManager.js"></script>
    <script src="js/managers/CalendarManager.js"></script>
    <script src="js/managers/GanttManager.js"></script>
    <script src="js/managers/UIManager.js"></script>
    <script src="js/managers/EventManager.js"></script>
    
    <!-- „É°„Ç§„É≥„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ -->
    <script src="js/WorkerBeeApp.js"></script>
</body>
</html>
