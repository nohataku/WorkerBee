# CSS キャッシュ問題の解決方法

## 🔧 修正内容

### 1. netlify.toml の修正
- CSSファイルのキャッシュ期間を1年間（31536000秒）から1日（86400秒）に短縮
- これにより、CSSの更新がより早く反映されます

### 2. バージョン管理の追加
- `index.html`のCSSリンクにバージョンパラメータを追加: `?v=1.0.0`
- `styles.css`ファイルにバージョン情報コメントを追加

### 3. 自動更新スクリプト
- `update-css-version.js`: CSSバージョンを自動更新するスクリプト
- `npm run css:update`: CSSバージョンを更新するコマンド

## 🚀 使用方法

### CSSを更新した後
1. CSSファイルを編集
2. 以下のコマンドを実行:
   ```bash
   npm run css:update
   ```
3. 変更をコミット・プッシュ
4. Netlifyで自動デプロイ

### 手動でバージョンを更新する場合
1. `public/index.html`の`?v=1.0.0`部分を新しいバージョンに変更
2. `public/css/styles.css`の先頭のバージョン情報コメントを更新

## 🔍 確認方法

### ローカル環境
1. `npm run serve`または`npm run pages:local`
2. ブラウザの開発者ツールでCSSファイルのバージョンを確認

### Netlify環境
1. デプロイ後、ブラウザで強制リロード（Ctrl+F5）
2. 開発者ツールでCSSファイルのバージョンパラメータを確認

## 📝 注意事項

- CSSを更新するたびに`npm run css:update`を実行することを推奨
- 大きなCSS変更の場合は手動でバージョン番号を意味のある値に設定
- キャッシュが残っている場合はブラウザの強制リロードを実行

## 🐛 トラブルシューティング

### CSSが古いまま
1. ブラウザのキャッシュをクリア
2. シークレットモードで確認
3. バージョンパラメータが正しく設定されているか確認

### Netlifyデプロイエラー
1. `netlify.toml`の設定を確認
2. `npm run build:netlify`をローカルで実行して確認
3. Netlifyのデプロイログを確認
